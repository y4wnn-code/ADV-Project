<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>register</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div style="display:flex;justify-content:center;align-items:center;height:100vh;">
  <div style="width:94%;max-width:420px;background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.05);">
    <h2 style="text-align:center;margin:0 0 14px 0;font-weight:700;">bloggwatch.</h2>
    <input id="ru" placeholder="username" style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc">
    <input id="rp" placeholder="password" type="password" style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc">
    <div style="font-size:12px;color:#666;margin-bottom:8px">Note: your username cannot be changed once registered.</div>
    <button id="regBtn" style="width:100%;padding:10px;border-radius:8px;border:none;background:#3b82f6;color:#fff;cursor:pointer;">register</button>
    <div style="text-align:center;margin-top:10px;font-size:13px">have account? <a href="login.html">login</a></div>
  </div>
</div>

<script>
  
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.getElementById('regBtn');
  btn.addEventListener('click', async () => {
    const username = document.getElementById('ru').value.trim();
    const password = document.getElementById('rp').value.trim();

    if (!username || !password) {
      alert('Please enter both username and password');
      return;
    }

    try {
      const res = await fetch('/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      const data = await res.json();

      if (data.success) {
        localStorage.setItem('username', username);
        window.location.href = 'dashboard.html';
      } else {
        alert(data.message || 'Username already exists');
      }
    } catch (err) {
      console.error(err);
      alert('Something went wrong. Please try again.');
    }
  });
});
</script>
</body>
</html>

